<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to Docker: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav incubator"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><abbr class="icon" title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team." style="text-decoration: unset">
          Â 
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link" style="color: #383838">Beta
            <i aria-hidden="true" class="icon" data-feather="alert-circle" style="color: #001483; border-radius: 5px"></i>
          </a>
          <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to Docker
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to Docker
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul>
</li>
      </ul>
</div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
<input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset>
</form>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to Docker
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introducing Containers</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="docker-hub.html">2. The Docker Hub</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="docker-desktop.html">3. Docker Desktop</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="docker-cli.html">4. Using the Docker command line</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="creating-container-images.html">5. Creating Your Own Container Images</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="advanced-containers.html">6. Creating More Complex Container Images</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-introduction"><p>Content from <a href="introduction.html">Introducing Containers</a></p>
<hr>
<p> Last updated on 2023-09-12 | 
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/episodes/introduction.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are containers, and why might they be useful to me?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Show how software depending on other software leads to configuration
management problems.</li>
<li>Identify the problems that software installation can pose for
research.</li>
<li>Explain the advantages of containerization.</li>
<li>Explain how using containers can solve software configuration
problems</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="learning-about-docker-containers" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="learning-about-docker-containers" class="callout-inner">
<h3 class="callout-title">Learning about Docker Containers<a class="anchor" aria-label="anchor" href="#learning-about-docker-containers"></a>
</h3>
<div class="callout-content">
<p>The Australian Research Data Commons has produced a short
introductory video about Docker containers that covers many of the
points below. Watch it before or after you go through this section to
reinforce your understanding!</p>
<p><em><a href="https://www.youtube.com/watch?v=HelrQnm3v4g" class="external-link">How can
software containers help your research?</a></em> Australian Research
Data Commons, 2021. DOI: <a href="https://doi.org/10.5281/zenodo.5091260" class="external-link">10.5281/zenodo.5091260</a></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="scientific-software-challenges">Scientific Software Challenges<a class="anchor" aria-label="anchor" href="#scientific-software-challenges"></a>
</h3>
<div id="whats-your-experience" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="whats-your-experience" class="callout-inner">
<h3 class="callout-title">Whatâs Your Experience?<a class="anchor" aria-label="anchor" href="#whats-your-experience"></a>
</h3>
<div class="callout-content">
<p>Take a minute to think about challenges that you have experienced in
using scientific software (or software in general!) for your research.
Then, share with your neighbors and try to come up with a list of common
gripes or challenges.</p>
</div>
</div>
</div>
<p>You may have come up with some of the following:</p>
<ul>
<li>you want to use software that doesnât exist for the operating system
(Mac, Windows, Linux) youâd prefer.</li>
<li>you struggle with installing a software tool because you have to
install a number of other dependencies first. Those dependencies, in
turn, require <em>other</em> things, and so on (i.e.Â combinatoric
explosion).</li>
<li>the software youâre setting up involves many dependencies and only a
subset of all possible versions of those dependencies actually works as
desired.</li>
<li>youâre not actually sure what version of the software youâre using
because the install process was so circuitous.</li>
<li>you and a colleague are using the same software but get different
results because you have installed different versions and/or are using
different operating systems.</li>
<li>you installed everything correctly on your computer but now need to
install it on a colleagueâs computer/campus computing cluster/etc.</li>
<li>youâve written a package for other people to use but a lot of your
users frequently have trouble with installation.</li>
<li>you need to reproduce a research project from a former colleague and
the software used was on a system you no longer have access to.</li>
</ul>
<p>A lot of these characteristics boil down to one fact: the main
program you want to use likely depends on many, many, different other
programs (including the operating system!), creating a very complex, and
often fragile system. One change or missing piece may stop the whole
thing from working or break something that was already running. Itâs no
surprise that this situation is sometimes informally termed âdependency
hellâ.</p>
<div id="software-and-science" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="software-and-science" class="callout-inner">
<h3 class="callout-title">Software and Science<a class="anchor" aria-label="anchor" href="#software-and-science"></a>
</h3>
<div class="callout-content">
<p>Again, take a minute to think about how the software challenges weâve
discussed could impact (or have impacted!) the quality of your work.
Share your thoughts with your neighbors. What can go wrong if our
software doesnât work?</p>
</div>
</div>
</div>
<p>Unsurprisingly, software installation and configuration challenges
can have negative consequences for research:</p>
<ul>
<li>you canât use a specific tool at all, because itâs not available or
installable.</li>
<li>you canât reproduce your results because youâre not sure what tools
youâre actually using.</li>
<li>you canât access extra/newer resources because youâre not able to
replicate your software set up.</li>
<li>others cannot validate and/or build upon your work because they
cannot recreate your systemâs unique configuration.</li>
</ul>
<p>Thankfully there are ways to get underneath (a lot of) this mess:
containers to the rescue! Containers provide a way to package up
software dependencies and access to resources such as files and
communications networks in a uniform manner.</p>
</div>
<section id="what-is-a-container-what-is-docker"><h2 class="section-heading">What is a Container? What is Docker?<a class="anchor" aria-label="anchor" href="#what-is-a-container-what-is-docker"></a>
</h2>
<hr class="half-width">
<p><a href="https://www.docker.com/" class="external-link">Docker</a> is a tool that allows
you to build what are called âcontainers.â Itâs not the only tool that
can create containers, but is the one weâve chosen for this workshop.
But what <em>is</em> a container?</p>
<p>To understand containers, letâs first talk briefly about your
computer.</p>
<p>Your computer has some standard pieces that allow it to work â often
whatâs called the hardware. One of these pieces is the CPU or processor;
another is the amount of memory or RAM that your computer can use to
store information temporarily while running programs; another is the
hard drive, which can store information over the long-term. All these
pieces work together to do the âcomputingâ of a computer, but we donât
see them because theyâre hidden from view (usually).</p>
<p>Instead, what we see is our desktop, program windows, different
folders, and files. These all live in whatâs called the filesystem.
Everything on your computer â programs, pictures, documents, the
operating system itself â lives somewhere in the filesystem.</p>
<p>NOW, imagine you want to install some new software but donât want to
take the chance of making a mess of your existing system by installing a
bunch of additional stuff (libraries/dependencies/etc.). You donât want
to buy a whole new computer because itâs too expensive. What if,
instead, you could have another independent filesystem and running
operating system that you could access from your main computer, and that
is actually stored within this existing computer?</p>
<p>Or, imagine you have two tools you want to use in your groundbreaking
research on cat memes: <code>PurrLOLing</code>, a tool that does
AMAZINGLY well at predicting the best text for a meme based on the cat
species and <code>WhiskerSpot</code>, the only tool available for
identifying cat species from images. You want to send cat pictures to
<code>WhiskerSpot</code>, and then send the species output to
<code>PurrLOLing</code>. But thereâs a problem: <code>PurrLOLing</code>
only works on Ubuntu and <code>WhiskerSpot</code> is only supported for
OpenSUSE so you canât have them on the same system! Again, we really
want another filesystem (or two) on our computer that we could use to
chain together <code>WhiskerSpot</code> and <code>PurrLOLing</code> in a
âpipelineââ¦</p>
<p>Container systems, like Docker, are special programs on your computer
that make it possible! The term âcontainerâ can be usefully considered
with reference to shipping containers. Before shipping containers were
developed, packing and unpacking cargo ships was time consuming and
error prone, with high potential for different clientsâ goods to become
mixed up. Just like shipping containers keep things together that should
stay together, software containers standardize the description and
creation of a complete software system: you can drop a container into
any computer with the container software installed (the âcontainer
hostâ), and it should âjust workâ.</p>
<div id="virtualization" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="virtualization" class="callout-inner">
<h3 class="callout-title">Virtualization<a class="anchor" aria-label="anchor" href="#virtualization"></a>
</h3>
<div class="callout-content">
<p>Containers are an example of whatâs called
<strong>virtualization</strong> â having a second âvirtualâ computer
running and accessible from a main or <strong>host</strong> computer.
Another example of virtualization are <strong>virtual machines</strong>
or VMs. A virtual machine typically contains a whole copy of an
operating system in addition to its own filesystem and has to get booted
up in the same way a computer would. A container is considered a
lightweight version of a virtual machine; underneath, the container is
(usually) using the Linux kernel and simply has some flavour of Linux +
the filesystem inside.</p>
</div>
</div>
</div>
<p>One final term: while the <strong>container</strong> is an
alternative filesystem layer that you can access and run from your
computer, the <strong>container image</strong> is the ârecipeâ or
template for a container. The container image has all the required
information to start up a running copy of the container. A running
container tends to be transient and can be started and shut down. The
container image is more long-lived, as a definition for the container.
You could think of the container image like a cookie cutter â it can be
used to create multiple copies of the same shape (or container) and is
relatively unchanging, where cookies come and go. If you want a
different type of container (cookie) you need a different container
image (cookie cutter).</p>
</section><section id="putting-the-pieces-together"><h2 class="section-heading">Putting the Pieces Together<a class="anchor" aria-label="anchor" href="#putting-the-pieces-together"></a>
</h2>
<hr class="half-width">
<p>Think back to some of the challenges we described at the beginning.
The many layers of scientific software installations make it hard to
install and re-install scientific software â which ultimately, hinders
reliability and reproducibility.</p>
<p>But now, think about what a container is â a self-contained,
complete, separate computer filesystem. What advantages are there if you
put your scientific software tools into containers?</p>
<p>This solves several of our problems:</p>
<ul>
<li>documentation â there is a clear record of what software and
software dependencies were used, from bottom to top.</li>
<li>portability â the container can be used on any computer that has
Docker installed â it doesnât matter whether the computer is Mac,
Windows or Linux-based.</li>
<li>reproducibility â you can use the exact same software and
environment on your computer and on other resources (like a large-scale
computing cluster).</li>
<li>configurability â containers can be sized to take advantage of more
resources (memory, CPU, etc.) on large systems (clusters) or less,
depending on the circumstances.</li>
</ul>
<p>The rest of this workshop will show you how to download and run
containers from pre-existing container images on your own computer, and
how to create and share your own container images.</p>
</section><section id="use-cases-for-containers"><h2 class="section-heading">Use cases for containers<a class="anchor" aria-label="anchor" href="#use-cases-for-containers"></a>
</h2>
<hr class="half-width">
<p>Now that we have discussed a little bit about containers â what they
do and the issues they attempt to address â you may be able to think of
a few potential use cases in your area of work. Some examples of common
use cases for containers in a research context include:</p>
<ul>
<li>Using containers solely on your own computer to use a specific
software tool or to test out a tool (possibly to avoid a difficult and
complex installation process, to save your time or to avoid dependency
hell).</li>
<li>Creating a <code>Dockerfile</code> that generates a container image
with software that you specify installed, then sharing a container image
generated using this Dockerfile with your collaborators for use on their
computers or a remote computing resource (e.g.Â cloud-based or HPC
system).</li>
<li>Archiving the container images so you can repeat analysis/modelling
using the same software and configuration in the future â capturing your
workflow.</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Almost all software depends on other software components to
function, but these components have independent evolutionary paths.</li>
<li>Small environments that contain only the software that is needed for
a given task are easier to replicate and maintain.</li>
<li>Critical systems that cannot be upgraded, due to cost, difficulty,
etc. need to be reproduced on newer systems in a maintainable and
self-documented way.</li>
<li>Virtualization allows multiple environments to run on a single
computer.</li>
<li>Containerization improves upon the virtualization of whole computers
by allowing efficient management of the host computerâs memory and
storage resources.</li>
<li>Containers are built from ârecipesâ that define the required set of
software components and the instructions necessary to build/install them
within a container image.</li>
<li>Docker is just one software platform that can create containers and
the resources they use.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-docker-hub"><p>Content from <a href="docker-hub.html">The Docker Hub</a></p>
<hr>
<p> Last updated on 2023-09-12 | 
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/episodes/docker-hub.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>One of the reasons why Docker is useful is that there is a lot of
content (container images) already prepared to be used. Each container
image represents a complete software installation that you can use and
access without any extra work!</p>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the Docker Hub, and why is it useful?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explore the Docker Hub webpage for a popular Docker container
image.</li>
<li>Find the list of tags for a particular Docker container image.</li>
<li>Identify the three components of a container imageâs
identifier.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>A lot of these images are hosted in the Docker Hub.</p>
<section id="introducing-the-docker-hub"><h2 class="section-heading">Introducing the Docker Hub<a class="anchor" aria-label="anchor" href="#introducing-the-docker-hub"></a>
</h2>
<hr class="half-width">
<p>The Docker Hub is an online repository of container images, a vast
number of which are publicly available. A large number of the container
images are curated by the developers of the software that they package.
Also, many commonly used pieces of software that have been containerized
into images are officially endorsed, which means that you can trust the
container images to have been checked for functionality, stability, and
that they donât contain malware.</p>
<div id="docker-can-be-used-without-connecting-to-the-docker-hub" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="docker-can-be-used-without-connecting-to-the-docker-hub" class="callout-inner">
<h3 class="callout-title">Docker can be used without connecting to the
Docker Hub<a class="anchor" aria-label="anchor" href="#docker-can-be-used-without-connecting-to-the-docker-hub"></a>
</h3>
<div class="callout-content">
<p>Note that while the Docker Hub is well integrated into Docker
functionality, the Docker Hub is certainly not required for all types of
use of Docker containers. For example, some organizations may run
container infrastructure that is entirely disconnected from the
Internet.</p>
</div>
</div>
</div>
</section><section id="exploring-an-example-docker-hub-page"><h2 class="section-heading">Exploring an example Docker Hub page<a class="anchor" aria-label="anchor" href="#exploring-an-example-docker-hub-page"></a>
</h2>
<hr class="half-width">
<p>As an example of a Docker Hub page, letâs explore the page for the
official Python language container images. Open your web browser to <a href="https://hub.docker.com" class="external-link">https://hub.docker.com</a></p>
<figure><img src="../fig/docker-hub/landing.png" alt="Dockerhub_landing" class="figure mx-auto d-block"></figure><p>We will need to register for the later stages of this course, so feel
free to do so now if you are not already.</p>
<p>In the search bar type âpythonâ and hit enter.</p>
<figure><img src="../fig/docker-hub/search_python.png" alt="Dockerhub_search" class="figure mx-auto d-block"></figure><p>You should see a list of images related to python. We can immediately
get a feel of the sheer number of container images hosted here. There is
upwards from 10,000 images related to python alone.</p>
<p>There is also some useful information that can help us choose the
image that we want, which we will point out in a moment.</p>
<p>For now, lets go to the top result, the <a href="https://hub.docker.com/_/python" class="external-link">python</a> container image (which
is endorsed by the Docker team) to see what is on a typical Docker Hub
software page.</p>
<figure><img src="../fig/docker-hub/python.png" alt="Dockerhub_python" class="figure mx-auto d-block"></figure><p>The top-left provides information about the name, short description,
popularity (i.e., more than a billion downloads in the case of this
container image), and endorsements.</p>
<p>The top-right provides the command to pull this container image to
your computer.</p>
<p>The main body of the page contains many used headings, such as:</p>
<ul>
<li>Which tags (i.e., container image versions) are supported.</li>
<li>Summary information about where to get help, which computer
architectures are supported, etc.</li>
<li>A longer description of the container image.</li>
<li>Examples of how to use the container image.</li>
<li>The license that applies.</li>
</ul>
<p>The âHow to use the imageâ section of most container imagesâ pages
will provide examples that are likely to cover your intended use of the
container image.</p>
</section><section id="container-image-versions-and-owners"><h2 class="section-heading">Container Image versions and owners<a class="anchor" aria-label="anchor" href="#container-image-versions-and-owners"></a>
</h2>
<hr class="half-width">
<p>A single Docker Hub page can have many different versions of
container images, based on the version of the software inside. These
versions are indicated by âtagsâ. When referring to the specific version
of a container image by its tag, you use a colon, <code>:</code>, like
this:</p>
<pre><code><span><span class="va">CONTAINER_IMAGE_NAME</span><span class="op">:</span><span class="va">TAG</span></span></code></pre>
<p>If we click the version tag for <code>alpine3.18</code> of this
image, Docker Hub shows it as <code>python:alpine3.18</code></p>
<figure><img src="../fig/docker-hub/python_alpine318.png" alt="Dockerhub_python" class="figure mx-auto d-block"></figure><p>The default tag (which is used if you donât specify one) is called
<code>latest</code>.</p>
<p>This container image is a âDocker Official Imageâ, which means that
the docker team mantains it and guarantees it. However, itâs equally
common to use container images that have been produced by individual
owners or organizations. Container images that you create and upload to
Docker Hub would fall into this category, as would the container images
maintained by organizations like <a href="https://hub.docker.com/u/continuumio" class="external-link">ContinuumIO</a> (the folks
who develop the Anaconda Python environment) or community groups like <a href="https://hub.docker.com/u/rocker" class="external-link">rocker</a>, a group that builds
community R container images.</p>
<p>In these cases, the âownerâ, that is the group- or individual- that
manage the container image is part of the image name, and it is given in
the format:</p>
<pre><code><span><span class="va">OWNER</span><span class="op">/</span><span class="va">CONTAINER_IMAGE_NAME</span><span class="op">:</span><span class="va">TAG</span></span></code></pre>
<p>as can be seen in these examples</p>
<p><br></p>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  rocker/tidyverse:latest
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<figure><img src="../fig/docker-hub/tidyverse.gif" alt="rocker/tidyverse:latest" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  mathworks/matlab:r2022b
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<figure><img src="../fig/docker-hub/matlab.gif" alt="mathworks/matlab" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  continuumio/anaconda3:master
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<figure><img src="../fig/docker-hub/anaconda.gif" alt="continuumio/anaconda3" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="repositories" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="repositories" class="callout-inner">
<h3 class="callout-title">Repositories<a class="anchor" aria-label="anchor" href="#repositories"></a>
</h3>
<div class="callout-content">
<p>The technical name for the contents of a Docker Hub page is a
ârepository.â The tag indicates the specific version of the container
image that youâd like to use from a particular repository. So a slightly
more accurate version of the above example is:</p>
<pre><code><span><span class="va">OWNER</span><span class="op">/</span><span class="va">REPOSITORY</span><span class="op">:</span><span class="va">TAG</span></span></code></pre>
</div>
</div>
</div>
</section><section id="choosing-container-images-on-docker-hub"><h2 class="section-heading">Choosing Container Images on Docker Hub<a class="anchor" aria-label="anchor" href="#choosing-container-images-on-docker-hub"></a>
</h2>
<hr class="half-width">
<p>Note that anyone can create an account on Docker Hub and share
container images there, so itâs important to exercise caution when
choosing a container image on Docker Hub. These are some indicators that
a container image on Docker Hub is consistently maintained, functional
and secure:</p>
<ul>
<li>The container image is updated regularly.</li>
<li>The container image associated with a well established company,
community, or other group that is well-known. Docker helps with badges
to mark official images, verified publishers and sponsored open source
software.</li>
<li>There is a Dockerfile or other listing of what has been installed to
the container image.</li>
<li>The container image page has documentation on how to use the
container image.</li>
<li>The container image is used by the wider community. The graph on the
right at the search page can help with this.</li>
</ul>
<p>If a container image is never updated, created by a random person,
and does not have a lot of metadata, it is probably worth skipping over.
Even if such a container image is secure, it is not reproducible and not
a dependable way to run research computations.</p>
</section><section id="other-sources-of-container-images"><h2 class="section-heading">Other sources of Container Images<a class="anchor" aria-label="anchor" href="#other-sources-of-container-images"></a>
</h2>
<hr class="half-width">
<p>Although many of the containers made for docker are hosted in the
Docker Hub, there are other places where these can be distributed,
including (but not limited to):</p>
<ul>
<li>
<a href="https://github.com/features/packages" class="external-link">GHCR</a> from
Github.</li>
<li>
<a href="https://quay.io/" class="external-link">Quay</a> from Red Hat.</li>
<li>
<a href="https://cloud.google.com/artifact-registry" class="external-link">Artifact
Registry</a> from Google.</li>
<li>
<a href="https://docs.gitlab.com/ee/user/packages/container_registry/" class="external-link">GLR</a>
from GitLab.</li>
<li>
<a href="https://aws.amazon.com/ecr/" class="external-link">ECR</a> from Amazon.</li>
<li>
<a href="https://azure.microsoft.com/en-us/products/container-registry" class="external-link">ACR</a>
from Azuere, Microsoft.</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The Docker Hub is an online repository of container images.</li>
<li>Many Docker Hub container images are public, and may be officially
endorsed.</li>
<li>Each Docker Hub page about a container image provides structured
information and subheadings</li>
<li>Most Docker Hub pages about container images contain sections that
provide examples of how to use those container images.</li>
<li>Many Docker Hub container images have multiple versions, indicated
by tags.</li>
<li>The naming convention for Docker container images is:
<code>OWNER/CONTAINER_IMAGE_NAME:TAG</code>
</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-docker-desktop"><p>Content from <a href="docker-desktop.html">Docker Desktop</a></p>
<hr>
<p> Last updated on 2023-09-12 | 
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/episodes/docker-desktop.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p><strong>This episode is meant to be demonstrative, that is, you do
not <em>need</em> to follow along.</strong></p>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is Docker Desktop?</li>
<li>What can it be used for?</li>
<li>Why canât it replace the cli?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Show Docker Desktop and its components.</li>
<li>Understand what images and containers are.</li>
<li>Visualize the process of image aquisition, container execution and
where it ends.</li>
<li>Understand the ephimeral nature of containers.</li>
<li>Have a glimpse at containers that allow interaction.</li>
<li>Understand the importance of cleaning up in docker.</li>
<li>Understand the limitations of Docker Desktop.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We will present the Docker Desktop dashboard, as it will be useful to
understand key concepts of docker, such as images and containers.
However, it is important to note that while it is mostly is free, some
features are offered at a premium. Also, it is not fully functional on
all operating systems; it can produce conflicts with the docker engine
on Linux, for example.</p>
<section id="getting-images"><h2 class="section-heading">Getting images<a class="anchor" aria-label="anchor" href="#getting-images"></a>
</h2>
<hr class="half-width">
<p>Setting up docker in Windows or Mac will have installed Docker
Desktop by default. If you open the application you will likely see
something like this: <img src="../fig/docker-desktop/00_lo.gif" alt="Docker Desktop being opened for the first time." class="figure"></p>
<p>Youâll notice that the panel on the left has a tab for âImagesâ and
another for âContainersâ. These will be the focus for the episode, and
we will ignore most other features.</p>
<p>On the top youâll also find a search icon, which links to Docker Hub,
and allows us to search for the images we saw in the previous episode
directly from here.</p>
<p>*Note that there are two tabs, one for containers and one for images.
Make sure that you select the right tab when you search! <img src="../fig/docker-desktop/01_search.png" alt="Search window." class="figure"></p>
<p>In Docker Desktop you can either search by name only, <img src="../fig/docker-desktop/02_search_name.png" alt="Search by name." class="figure"></p>
<p>or include the owner. You can then select the tag from the dropdown
menu. <img src="../fig/docker-desktop/03_search_owner%26tag.png" alt="Search with owner and select a tag." class="figure"></p>
<p>Once you find the image you were looking for, you can either download
it (pull), or directly run it.</p>
<p>Weâll start by downloading the latest versions of
<code>hello-world</code>, <code>docker/getting-started</code> and
<code>alpine</code>.</p>
</section><section id="inspecting-images"><h2 class="section-heading">Inspecting images<a class="anchor" aria-label="anchor" href="#inspecting-images"></a>
</h2>
<hr class="half-width">
<p>The âImagesâ tab on the left panel will show all the images in your
system, so you will be able to see them here. <img src="../fig/docker-desktop/04_pulled_3.png" alt="Images list, hello-world, getting-started and alpine." class="figure"></p>
<p>From this tab we can see some information about the images on disk,
and run them, but we can also inspect the images. Clicking on the image
will open a window with information on how the image is built, and
examine its packages and vulnerabilities. <img src="../fig/docker-desktop/05_image_inspection.png" alt="Inspecting image hello-world." class="figure"></p>
<p>The <code>hello-world</code> image does not seem too interesting from
here. If you go to DockerHub youâll find links to the Github site, where
youâll see that the image is not as simple as it looks. Nevertheless,
this is a very nice and quick way to explore an image.</p>
<p>If we now inspect the <code>docker/getting-started</code> image, for
example, we can see that it detects some vulnerabilities: <img src="../fig/docker-desktop/06_image_inspection_gs.png" alt="Inspecting image getting-started." class="figure"></p>
<p>You can even further inspect the vulnerable layers by looking at the
command <img src="../fig/docker-desktop/07_image_inspection_gs_2.png" alt="Inspecting image command in getting-started." class="figure"></p>
<p>This all looks rather scary, and it is important that we are careful
with the images that we download. It is therefore quite useful to be
able to analize them like this. This image, in particular, is from a
verified publisher (Docker Inc.Â no less!), and has been downloaded over
10M times, so the container is likely not maliicous.</p>
</section><section id="running-containers"><h2 class="section-heading">Running containers<a class="anchor" aria-label="anchor" href="#running-containers"></a>
</h2>
<hr class="half-width">
<p>The images that we just downloaded are immutable files, they are
snapshots of an environment, distributed to be used as
<em>templates</em> to create âcontainersâ. The containers are,
essentially, images being <em>run</em>. They are executions of the
image, and because they are running, they are no longer âstaticâ.</p>
<p>Letâs run the <code>hello-world</code> image by either clicking the
âRunâ button in the âActionsâ column, from the Images tab. <img src="../fig/docker-desktop/08_image_run.png" alt="Run button from Images tab." class="figure"></p>
<p>A prompt will ask you to confirm âRunâ or modify some optional
settings. <img src="../fig/docker-desktop/09_image_run_prompt.png" alt="Run confirmation prompt." class="figure"></p>
<p>The optional settings allow you to modify the containerâs name, so
that you can easily identify it afterwards. Lets add an appropriate name
and confirm with the âRunâ button. <img src="../fig/docker-desktop/10_optional_settings.png" alt="Run optional settings." class="figure"></p>
<p>You will likely be taken to a âLogsâ tab inside the container that
you just ran. The logs show the output of this particular image, âHello
from Docker!â among other things.</p>
<p>If you look carefully, the âContainersâ tab on the left is
highlighted. We are looking at a container now, not an image, and so we
were re-located.</p>
<p>Exploring the âInspectâ tab will show us some information, but for
now we are more interested in what the âTerminalâ and âStatsâ tabs have
to say. They both seem to indicate that we need to <em>run</em> or
<em>start</em> the container.</p>
<p><br></p>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Logs tab
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/11_hello_log.png" alt="Logs tab in container from hello-world image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Inspect tab
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/12_hello_inspect.png" alt="Inspect tab in container from hello-world image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Terminal tab
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/14_hello_terminal.png" alt="Terminal tab in container from hello-world image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Stats tab
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/13_hello_stats.png" alt="Stats tab in container from hello-world image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>Indeed, if we look carefully, we will find an âExited (0)â status
under the container name, and a âStartâ button near the top-right
corner. However, if we click on that button we will see the output
duplicated in the logs, and the âExited (0)â status again. <img src="../fig/docker-desktop/15_hello_start.png" alt="Clickling Start on the already run hello-world container." class="figure"></p>
<p>If we go back to the images tab and run the image again (letâs not
bother giving it a name this time), weâll see that the same thing
hapens. We get the âHello from Docker!â, and the container exits. <img src="../fig/docker-desktop/16_hello_2.png" alt="Running hello-world image for a second time." class="figure"></p>
<p>The nature of most containers is <em>ephimeral</em>. They are meant
to execute a process, and when the process is completed, they exit. We
can confirm this by clicking on the âContainersâ tab on the left. This
will exit the container inspection and show us all the containers. Both
containers in the list have a status âExitedâ. <img src="../fig/docker-desktop/17_containers.png" alt="Containers list." class="figure"></p>
<p>You may be wondering why if we have only run the
<code>hello-world</code> image, you can see there are two containers.
One of the containers we named, and the other has some gibberish as a
name (Docker generated this randomly). As mentioned before, the
<em>image</em> is used as a template, and as many <em>containers</em> as
we want can be created from it. If we go back to the âImagesâ tab and
run <code>hello world</code> again, weâll see a new container
appear.</p>
</section><section id="interacting-with-containers"><h2 class="section-heading">Interacting with containers<a class="anchor" aria-label="anchor" href="#interacting-with-containers"></a>
</h2>
<hr class="half-width">
<p>Not all containers are as short lived as the one weâve been using. If
we run the <code>docker/getting-started</code> image that we had pulled
earlier, we will see something different happen. You can immediately
notice the status under the container name is âRUNNINGâ now. nal
<em>inside</em> the container.</p>
<p>The âLogsâ tab is not too informative, but the âInspectâ tab already
shows more information. A process called ânginxâ is running. The
âTerminalâ and âStatsâ tabs changed the most. Since the container is
still running, the stats get shown, and we are able to launch a
termi</p>
<p><br></p>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Logs tab
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/18_gettingstarted_log.png" alt="Logs tab in container from getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Inspect tab
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/19_gettingstarted_inspect.png" alt="Inspect tab in container from getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Terminal tab
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/20_gettingstarted_terminal.png" alt="Terminal tab in container from getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Stats tab
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/21_gettingstarted_stats.png" alt="Stats tab in container from getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>Before trying to do anything in the terminal, letâs look at the
container list by clicking on the âContainersâ tab on the left. Youâll
see the green icon of the container indicating that it is still live,
and indication of how long itâs been running for. <img src="../fig/docker-desktop/22_gettingstarted_containers.png" alt="Containers list, getting-started still running." class="figure"></p>
<p>Clicking on the container name again will take us back to the âLogsâ
tab in the container. Lets try and interact with the terminal inside the
container. If you print the working directory with <code>pwd</code>
youâll get the base directory: <code>/</code>. You can also list the
contents with <code>ls</code>, and the <code>docker-entrypoint</code>
files are a dead giveaway that we are inside the container. At this
point this container is very much like a VM. We can modify things, like
for example making a directory with <code>mkdir</code>, and see it has
been created with <code>ls</code> again. <img src="../fig/docker-desktop/23_gettingstarted_mkdir.png" alt="Terminal, mkdir and ls inside getting-started container." class="figure"></p>
<p>But we can do more than that, we can install things. For example,
youâll notice that <code>htop</code> is not installed. Since the
<code>getting-started</code> image is based on Alpine, we can install it
using <code>apk add htop</code>, and we can now use it.</p>
<p><br></p>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">
  Installing htop
  </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" data-bs-parent="#accordionSolution9" aria-labelledby="headingSolution9">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/24_gettingstarted_htop.png" alt="Terminal, installing htop inside getting-started container." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10">
  Running htop
  </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" data-bs-parent="#accordionSolution10" aria-labelledby="headingSolution10">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/25_gettingstarted_htop2.png" alt="Terminal, running htop inside getting-started container." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>The container does not need to stay alive forever, and you can see
that there is a âstopâ icon on the top right. If we stop the container,
we get a familiar empty tab in âTerminalâ and âStatsâ. The âContainersâ
tab on the left will also show the container status as âExitedâ</p>
<p><br></p>
<div id="accordionSolution11" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution11" aria-expanded="false" aria-controls="collapseSolution11">
  <h4 class="accordion-header" id="headingSolution11">
  Terminal tab
  </h4>
</button>
<div id="collapseSolution11" class="accordion-collapse collapse" data-bs-parent="#accordionSolution11" aria-labelledby="headingSolution11">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/26_gettingstarted_exited_t.png" alt="Terminal tab in container from stopped getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution12" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution12" aria-expanded="false" aria-controls="collapseSolution12">
  <h4 class="accordion-header" id="headingSolution12">
  Stats tab
  </h4>
</button>
<div id="collapseSolution12" class="accordion-collapse collapse" data-bs-parent="#accordionSolution12" aria-labelledby="headingSolution12">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/27_gettingstarted_exited_s.png" alt="Stats tab in container from stopped getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution13" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution13" aria-expanded="false" aria-controls="collapseSolution13">
  <h4 class="accordion-header" id="headingSolution13">
  Container list
  </h4>
</button>
<div id="collapseSolution13" class="accordion-collapse collapse" data-bs-parent="#accordionSolution13" aria-labelledby="headingSolution13">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/28_gettingstarted_exited_c.png" alt="Container list after stopping getting-started image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>Now lets say I want to run the <code>getting-started</code> image
again. So I go to the âImagesâ tab, and click run. Now lets go to the
âTerminalâ tab, and try and find our directory with <code>ls</code>. The
directory is not there. Weâd also installed <code>htop</code>. so lets
have a go at running it. Not there either. <img src="../fig/docker-desktop/29_gettingstarted_2.png" alt="Terminal in fresh getting-started image." class="figure"></p>
<p>When we re-ran the <em>image</em>, we created a <strong>new</strong>
<em>container</em>. The new container is created from the template saved
in the image, and so âourâ changes have banished. This becomes very
clear when we go back to the âContainersâ tab on the left. We can see
that the first container we created from the
<code>getting-started</code> image is there, next to the new container
(which is still running, by the way). <img src="../fig/docker-desktop/30_gettingstarted_2_containers.png" alt="Containers after new run of getting-started image." class="figure"></p>
</section><section id="reviving-containers"><h2 class="section-heading">Reviving containers<a class="anchor" aria-label="anchor" href="#reviving-containers"></a>
</h2>
<hr class="half-width">
<p>We <em>can</em> get the old container running again, although this is
rarely something weâd <em>want</em> to do. In Docker Desktop, all we
need to do is click on the âStartâ button from the âContainersâ list.
The terminal will appear empty, because it is a new session, but you
will even be able to ârecallâ commands. <img src="../fig/docker-desktop/31-32.gif" alt="Reviving container getting-started." class="figure"></p>
</section><section id="cleaning-up"><h2 class="section-heading">Cleaning up<a class="anchor" aria-label="anchor" href="#cleaning-up"></a>
</h2>
<hr class="half-width">
<p>The <code>hello-world</code> image was nice and useful to test docker
was working, but it is now rather useless. If I want to delete it, the
âImagesâ tab on the left has a convenient bin icon to do so. Clicking on
it will prompt you for confirmation, but it will fail. <img src="../fig/docker-desktop/33-35.gif" alt="Failing to delete image." class="figure"></p>
<p>Youâll probably notice that the status of the image is âIn useâ. That
seems strange though, given that all the containers from that image
excited immediately.</p>
<p>Lets have a look at the âContainersâ tab. It shows a list of 5
containers now. Three of them came from the <code>hello-world</code>
image, and are stopped. Two of them came from the
<code>getting-started</code> image, and are running.</p>
<p>Weâve only been using Docker for 15 minutes though! You may see how
this can become a problemâ¦ Particularly so because we were a bit sloppy
and did not name the containers. Letâs try and get rid of the containers
then. We can conveniently select them all with the tickbox at the top,
and an option to âDeleteâ shows up. Clicking on it will prompt for
confirmation, and we can go ahead and accept. <img src="../fig/docker-desktop/36-38.gif" alt="Deleting containers." class="figure"></p>
<p>All our containers are now gone. Forever.</p>
<p><strong><em>Warning:</em></strong> You have to be careful here, this
action deleted even the containers that were running. You can filter the
containers before you select them âallâ.</p>
<p>On the up-side, the âImagesâ tab shows both the
<code>hello-world</code> and the <code>getting-started</code> images as
âUnusedâ now. For docker, an image is âIn useâ as long as at least one
container has been created from it. We have just deleted all the
containers created from either of these images. This tells Docker that
they are no longer being used, and can therefore be safely deleted. <img src="../fig/docker-desktop/39-42.gif" alt="Successfully deleting images." class="figure"></p>
</section><section id="limitations---why-not-docker-desktop"><h2 class="section-heading">Limitations - Why not Docker Desktop?<a class="anchor" aria-label="anchor" href="#limitations---why-not-docker-desktop"></a>
</h2>
<hr class="half-width">
<p>We have seen many of the neat and functional bits of Docker Desktop,
and it can be mighty appealing, particularly if you lean towards the use
of graphical interfaces. However, weâve not touched on its weaknesses.
Weâll just need to point at one to feel the need to throw everything
overboard.</p>
<p>Letâs go ahead and run the only image we have already pulled,
<code>alpine</code>. <img src="../fig/docker-desktop/43_alpine.png" alt="Logs tab in container from alpine image." class="figure"></p>
<p>That was fast, and uneventful. Not even a single output to the
âLogsâ. No way to open a terminal inside Alpine.</p>
<p><br></p>
<div id="accordionSolution14" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution14" aria-expanded="false" aria-controls="collapseSolution14">
  <h4 class="accordion-header" id="headingSolution14">
  Logs tab
  </h4>
</button>
<div id="collapseSolution14" class="accordion-collapse collapse" data-bs-parent="#accordionSolution14" aria-labelledby="headingSolution14">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/44_alpine_logs.png" alt="Logs tab in container from alpine image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution15" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution15" aria-expanded="false" aria-controls="collapseSolution15">
  <h4 class="accordion-header" id="headingSolution15">
  Inspect tab
  </h4>
</button>
<div id="collapseSolution15" class="accordion-collapse collapse" data-bs-parent="#accordionSolution15" aria-labelledby="headingSolution15">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/45_alpine_i.png" alt="Inspect tab in container from alpine image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution16" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution16" aria-expanded="false" aria-controls="collapseSolution16">
  <h4 class="accordion-header" id="headingSolution16">
  Terminal tab
  </h4>
</button>
<div id="collapseSolution16" class="accordion-collapse collapse" data-bs-parent="#accordionSolution16" aria-labelledby="headingSolution16">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/46_alpine_t.png" alt="Terminal tab in container from alpine image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution17" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution17" aria-expanded="false" aria-controls="collapseSolution17">
  <h4 class="accordion-header" id="headingSolution17">
  Stats tab
  </h4>
</button>
<div id="collapseSolution17" class="accordion-collapse collapse" data-bs-parent="#accordionSolution17" aria-labelledby="headingSolution17">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/47_alpine_s.png" alt="Stats tab in container from alpine image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>Just to be clear though, this Docker image does contain the whole
Alpine OS. In Docker Desktop, however, there is no way to interact with
it.</p>
<p>Letâs try something different. Thereâs a program called
<code>cowsay</code> that lets you print messages as if a cow was saying
them. Searching for that image shows that there is one by
<code>beatrixxx32</code> with a reasonable number of downloads. <img src="../fig/docker-desktop/48_cowsay.png" alt="Search of cowsay image." class="figure"></p>
<p>So lets pull that image and run it.</p>
<p><br></p>
<div id="accordionSolution18" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution18" aria-expanded="false" aria-controls="collapseSolution18">
  <h4 class="accordion-header" id="headingSolution18">
  Logs tab
  </h4>
</button>
<div id="collapseSolution18" class="accordion-collapse collapse" data-bs-parent="#accordionSolution18" aria-labelledby="headingSolution18">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/50_cowsay_logs.png" alt="Logs tab in container from cowsay image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution19" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution19" aria-expanded="false" aria-controls="collapseSolution19">
  <h4 class="accordion-header" id="headingSolution19">
  Inspect tab
  </h4>
</button>
<div id="collapseSolution19" class="accordion-collapse collapse" data-bs-parent="#accordionSolution19" aria-labelledby="headingSolution19">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/51_cowsay_inspect.png" alt="Inspect tab in container from cowsay image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution20" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution20" aria-expanded="false" aria-controls="collapseSolution20">
  <h4 class="accordion-header" id="headingSolution20">
  Terminal tab
  </h4>
</button>
<div id="collapseSolution20" class="accordion-collapse collapse" data-bs-parent="#accordionSolution20" aria-labelledby="headingSolution20">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/52_cowsay_term.png" alt="Terminal tab in container from cowsay image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionSolution21" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution21" aria-expanded="false" aria-controls="collapseSolution21">
  <h4 class="accordion-header" id="headingSolution21">
  Stats tab
  </h4>
</button>
<div id="collapseSolution21" class="accordion-collapse collapse" data-bs-parent="#accordionSolution21" aria-labelledby="headingSolution21">
<div class="accordion-body">
<figure><img src="../fig/docker-desktop/53_cowsay_stats.png" alt="Stats tab in container from cowsay image." class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>We do get a cow this time, but it is not saying anything. But it does
not know <em>what</em> to say. Going back to the cowsay image search,
you may notice that in âUsageâ the command line asks for âyour messageâ.
We are not using a command though, we just clicked <em>run</em>. Maybe
we missed something in the optional settings! <img src="../fig/docker-desktop/54_cowsay_opt.png" alt="Optional settings for cowsay." class="figure"></p>
<p>No, it does not seem like it. No matter what we do, we cannot make
the cow say anything from here.</p>
<p>Are the alpine and cowsay images useless? No, definitely not.
However, they are expecting some sort of input or command, which we
cannot provide from Docker Desktop.</p>
<p>This is the case for most images, and so Docker Desktop (as it is
now) cannot really be used for much more than as a nice dashboard.</p>
<p>In the next episode, we will use docker from the command line, and
all of the advantages it brings will become aparent.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Docker Desktop is a great dashboard that allows us to understand and
visualize the lifecycle of images and containers.</li>
<li>Images are snapshots of an environment, easily distributable and
ready to be used as <em>templates</em> for containers.</li>
<li>Containers are executions of the images, often with configuration
added on top, and usually meant for single use.</li>
<li>Running a container usually implies creating a new copy, so it is
important to clean up regularly.</li>
<li>Docker Desktop could potentially be all you need to use if you only
<em>consume</em> images out of the box.</li>
<li>However, it is very limited in most cases (even for
<em>consumers</em>), and rarely allows the user to configure and
interact with the containers adequately.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-docker-cli"><p>Content from <a href="docker-cli.html">Using the Docker command line</a></p>
<hr>
<p> Last updated on 2023-09-12 | 
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/episodes/docker-cli.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 198 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>So far, we have seen how easily you can find images and run
containers in Docker Desktop. However, we have also seen Docker
Desktopâs limitations, why couldnât we do anything useful with our
Alpine container?</p>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What actually happens when I run a container?</li>
<li>How can I control the behaviour of containers?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn the lifecycle of Docker containers</li>
<li>Learn how to use the Docker command line to perform tasks we learned
to do in Docker Desktop</li>
<li>Learn to perform more advanced Docker tasks, only possible in the
command line</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>To understand this, we need to learn about the lifecycle of Docker
containers.</p>
<section id="container-lifecycle"><h2 class="section-heading">Container lifecycle<a class="anchor" aria-label="anchor" href="#container-lifecycle"></a>
</h2>
<hr class="half-width">
<p>So, what happens when we run a Docker container? <img src="../fig/docker_life_0.png" alt="A flowchart showing the lifecycle of a Docker container." class="figure"></p>
<div class="section level3">
<h3 id="startup">Startup<a class="anchor" aria-label="anchor" href="#startup"></a>
</h3>
<p>When we run a Docker container, the first set of actions occur during
the âstartupâ phase:</p>
<ul>
<li>First, Docker checks if you already have the container image, and
downloads it if you donât (known as a pull)</li>
<li>Next, the container image is used to create the container and start
the containerâs runtime environment</li>
</ul>
</div>
<div class="section level3">
<h3 id="default-command">Default Command<a class="anchor" aria-label="anchor" href="#default-command"></a>
</h3>
<p>Once the container has started, it executes its default command.</p>
<p>The default command is specified by the imageâs creator and is formed
of two parts:</p>
<ul>
<li>Entrypoint: The base command for the container (may be omitted,
default: ââ)</li>
<li>Command: Parameters for the base command (or, if entrypoint omitted,
the whole default command)</li>
</ul>
<p>When the container runs, Entrypoint and Command are concatenated to
form the default command which is then executed.</p>
</div>
<div class="section level3">
<h3 id="shutdown">Shutdown<a class="anchor" aria-label="anchor" href="#shutdown"></a>
</h3>
<p>Whether a container shuts down depends on the default command. A
container will not shutdown until its default process has finished.</p>
<p>Therefore, a command the runs to completion will allow a container to
shut down, but a service that runs indefinitely will not.</p>
</div>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>Letâs take a look at some examples.</p>
<div class="section level4">
<h4 id="example-1">Example 1<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h4>
<figure><img src="../fig/docker_life_1.png" alt="A flowchart showing the lifecycle of a Docker container. with an example" class="figure mx-auto d-block"></figure><p>In example 1, an Entrypoint of âechoâ is given along with a Command
of âhello worldâ to the container.</p>
<p>This works in exactly the same way as running the following in a
standard terminal:</p>
<pre><code>$ echo hello world</code></pre>
</div>
<div class="section level4">
<h4 id="example-2">Example 2<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h4>
<figure><img src="../fig/docker_life_2.png" alt="A flowchart showing the lifecycle of a Docker container. with an example" class="figure mx-auto d-block"></figure><p>In example 2, an Entrypoint of âsleepâ is given along with a Command
of âinfinityâ to the container.</p>
<p>This causes the container to run the sleep command indefinitely,
meaning that the default command never finishes, and the container stays
alive without shutting down.</p>
<p>This example may seem artificial, but it is common to have containers
that run indefinitely. A common example would be a webserver which
renders a website, running until stopped or changed.</p>
</div>
</div>
</section><section id="return-to-alpine"><h2 class="section-heading">Return to Alpine<a class="anchor" aria-label="anchor" href="#return-to-alpine"></a>
</h2>
<hr class="half-width">
<p>So, how does this explain why the Alpine container seemed so
uninteresting?</p>
<p>First, letâs apply what we have learned about the lifecycle of a
Docker container. Letâs find out what the Entrypoint and Command for the
Alpine container are. To do this we will use the Docker command line
interface.</p>
<div class="section level3">
<h3 id="docker-command-line-syntax">Docker command line syntax<a class="anchor" aria-label="anchor" href="#docker-command-line-syntax"></a>
</h3>
<p>The general syntax for the Docker command line explained in this
diagram:</p>
<figure><img src="../fig/docker_cmd.png" alt="A diagram showing the syntactic structure of a Docker command" class="figure mx-auto d-block"></figure><p>There is a base command, always âdockerâ. A specialising command
which specifies the type of the object you wish to act on. The action
command which select the actual process that will beformed and finally
the name of the object you wish to act on. You may also need to add
extra arguments and switches.</p>
</div>
<div class="section level3">
<h3 id="inspecting-images">Inspecting images<a class="anchor" aria-label="anchor" href="#inspecting-images"></a>
</h3>
<p>Applying this, we want to <strong>inspect</strong> the
<strong>image</strong> of <strong>Alpine</strong> to find out the
Entrypoint and Command. We can do this by running the command below,
where we have specified an extra argument <code>-f</code> which is a
string specifying the output format of the command (without it we would
get a large JSON dump describing the container).</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> inspect alpine <span class="at">-f</span> <span class="st">"Entrypoint: {{.Config.Entrypoint}} Command: {{.Config.Cmd}}"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Entrypoint: [] Command: [/bin/sh]</code></pre>
</div>
<p>So, we can see from this command that Alpine specifies:</p>
<ul>
<li>Entrypoint: null (unspecified)</li>
<li>Command: /bin/sh</li>
</ul>
<p>Therefore, the default command for Alpine is: â/bin/shâ.</p>
<p>What is wrong with this? Shouldnât this just open a terminal
prompt?</p>
<p>Not in this case! Running a command in a Docker container is not
quite like running it in your terminal.</p>
<p>When you use your terminal, you are able to type commands and
interact with the underlying system. By default however, Docker does not
allow containers to do this. Without special measures, a Docker
container has no way of recieving interactions and instead sends a empty
signal to the sh process. sh is programmed to exit when it recieves an
empty signal and therefore finishes its process.</p>
<pre><code>$ /bin/sh               # you might expect Docker to be running the default command like this
$ /bin/sh \&lt; /dev/null  # but actually, it is like this!</code></pre>
<p>This is why the Alpine contatainer seemed so uninteresting, in Docker
Desktop there was no way for us to provide an interactive session to the
container! It is possible to change this behavior, but not using Docker
Desktop. Instead, we now need to dig in to the more powerful and
flexible Docker Command Line Interface.</p>
<div id="section" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="section" class="callout-inner">
<h3 class="callout-title"></h3>
<div class="callout-content">
<p>This behavior can also be seen on other shell-like containers, for
example those with âbashâ or âpythonâ as default commands.</p>
</div>
</div>
</div>
</div>
</section><section id="running-a-container"><h2 class="section-heading">Running a container<a class="anchor" aria-label="anchor" href="#running-a-container"></a>
</h2>
<hr class="half-width">
<p>So, how does the Docker command line address this? Can we use the
Docker CLI to interact with our containers?</p>
<p>Letâs now focus on running Docker containers using the CLI.</p>
<p>Again, we will use the docker base command, this time specialising
this command with ârunâ and the name of an image; to tell Docker that we
want to start up the specified container image.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run alpine</span></code></pre>
</div>
<p>You will likely see output similar to the below:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; \##Unable to find image 'alpine:latest' locally
&gt; latest: Pulling from library/alpine
&gt; f56be85fc22e: Already exists
&gt; Digest: sha256:124c7d2707904eea7431fffe91522a01e5a861a624ee31d03372cc1d138a3126
&gt; Status: Downloaded newer image for alpine:latest</code></pre>
</div>
<p>This output shows docker recognising that it does not have the Alpine
image locally, and beginning the process of downloading and storing the
image.</p>
<p>But is something missing? We donât see any other output? Letâs run
the command again.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run alpine</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt;</code></pre>
</div>
<p>This time there is no output at all, with the image already
downloaded it is able to run without downloading. But why is no output
produced? This is for the same reason as when we tried running Alpine in
Docker Desktop (as explained above), the Docker run command is not
sending any commands, and the default command exits automatically.</p>
<div id="downloading-containers" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="downloading-containers" class="callout-inner">
<h3 class="callout-title">Downloading containers<a class="anchor" aria-label="anchor" href="#downloading-containers"></a>
</h3>
<div class="callout-content">
<p>When we run docker run, the image we ask for is automatically
downloaded. If you wanted to download in image without running this is
also possible. You can use:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker pull alpine</span></code></pre>
</div>
</div>
</div>
</div>
<p>Why donât we finally try and make Alpine do something?</p>
</section><section id="overriding-the-default-command"><h2 class="section-heading">Overriding the default command<a class="anchor" aria-label="anchor" href="#overriding-the-default-command"></a>
</h2>
<hr class="half-width">
<p>To get the Alpine image to do something interesting; we will want to
overwrite the default command.</p>
<p>This can be done in the Docker CLI, by specifying the desired
command, after the docker run command and image name.</p>
<p>For example, if we wanted the Alpine container to print âhello
worldâ, we could use the standard Unix command, echo.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run alpine echo <span class="st">"hello world"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; hello world</code></pre>
</div>
<p>Great! We have finally managed to do something interesting with the
Alpine image.</p>
<p>This is a big step, but how can we evolve from here? What if we tried
to generalise our printing command?</p>
<p>We can do this by modifying the entrypoint portion of the default
command (remember: the entrypoint is the portion of the default command
which prefixes the command that comes after the image name).</p>
<p>This way we can have just the text we want to print after the image
name.</p>
<p>We do this by adding the ââentrypointâ switch to our Docker command,
followed by the command we want to become the entrypoint.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">--entrypoint</span> echo alpine <span class="st">"hello world"</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">--entrypoint</span> echo alpine <span class="st">"lovely day"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; hello world
&gt; lovely day</code></pre>
</div>
<p>Wonderful! But this neednât be limited to just echo, letâs use this
approach to get some more information about the container, by printing
the contents of a special file called âos-releaseâ.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run alpine cat /etc/os-release</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NAME="Alpine Linux"
ID=alpine
VERSION\_ID=3.17.3
PRETTY\_NAME="Alpine Linux v3.17"
HOME\_URL="[https://alpinelinux.org/](https://alpinelinux.org/)"
BUG\_REPORT\_URL="[https://gitlab.alpinelinux.org/alpine/aports/-/issues](https://gitlab.alpinelinux.org/alpine/aports/-/issues)"</code></pre>
</div>
<div id="make-the-container-use-cat-as-a-base-command" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="make-the-container-use-cat-as-a-base-command" class="callout-inner">
<h3 class="callout-title">Make the container use cat as a base
command<a class="anchor" aria-label="anchor" href="#make-the-container-use-cat-as-a-base-command"></a>
</h3>
<div class="callout-content">
<p>Can you make the Alpine container use cat as its base command? Can
you print the os-release information using this approach?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">--entrypoint</span> cat alpine /etc/os-release</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="print-the-users-present-in-the-alpine-container" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="print-the-users-present-in-the-alpine-container" class="callout-inner">
<h3 class="callout-title">Print the users present in the Alpine
container<a class="anchor" aria-label="anchor" href="#print-the-users-present-in-the-alpine-container"></a>
</h3>
<div class="callout-content">
<p>Can you make the Alpine container print the contents of the
/etc/passwd file? (which contains details of the registered users of a
Linux system)</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">--entrypoint</span> cat alpine /etc/passwd</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run alpine cat /etc/passwd</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>We can see from the output that we are indeed running in an Alpine
container and now have a powerful way to execute single commands in a
Docker container.</p>
</section><section id="running-a-container-interactively"><h2 class="section-heading">Running a container interactively<a class="anchor" aria-label="anchor" href="#running-a-container-interactively"></a>
</h2>
<hr class="half-width">
<p>But what if we wanted to run a series of commands? What if we wanted
to be able to explore within a container?</p>
<p>We will look now at how we can create interactive sessions for using
Docker containers.</p>
<p>Luckily this is straightforward, we simply need to modify our
standard Docker command to include two new flags.</p>
<p>We need to add:</p>
<ul>
<li>â-iâ to enable interactivity</li>
<li>â-tâ to enable a TTY connection (the ability to type things!)</li>
</ul>
<p>Letâs try this with the Alpine image:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">-i</span> <span class="at">-t</span> alpine</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/ #</code></pre>
</div>
<p>You are now inside the container! Letâs try some familiar
commands.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> cat /etc/os-release</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NAME="Alpine Linux"
ID=alpine
VERSION\_ID=3.17.3
PRETTY\_NAME="Alpine Linux v3.17"
HOME\_URL="[https://alpinelinux.org/](https://alpinelinux.org/)"
BUG\_REPORT\_URL="[https://gitlab.alpinelinux.org/alpine/aports/-/issues](https://gitlab.alpinelinux.org/alpine/aports/-/issues)"</code></pre>
</div>
<p>You can see we get the same output as earlier, but this time the
container remains live and we remain inside the container.</p>
<p>You can now exit the container by running:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> exit</span></code></pre>
</div>
<p>Using containers in this interactive way can be useful, but we have
to be careful as (by default) our changes will not persist.</p>
<p>You can see this for yourself with the following process</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">-i</span> <span class="at">-t</span> alpine</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> touch hello-world</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> echo <span class="st">"hi everyone"</span> <span class="op">&gt;</span> hello-world</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> cat hello-world</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> exit</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; hi everyone</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">-i</span> <span class="at">-t</span> alpine</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> cat hello-world</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&gt; cat: can't open 'hello-world': No such file or directory</code></pre>
</div>
<p>You can see that, while we were still interacting with the container,
our file continued to exist. Once we left, it was gone!</p>
</section><section id="getting-files-into-the-container"><h2 class="section-heading">Getting files into the container<a class="anchor" aria-label="anchor" href="#getting-files-into-the-container"></a>
</h2>
<hr class="half-width">
<p>Now that we are figuring out how to work with containers, letâs
imagine a situation. We are working in a data science lab, and our
supervisor has asked us to run some tools that they have developed;
which they are distributing in Docker.</p>
<p>The first tool, called Random, generates a series of random numbers.
The second tool, named Datamash, performs simple statistical analyses on
single columns of data. Letâs figure out how to use these tools and some
of the hurdles we will have to overcome.</p>
<p>First, letâs download the tools:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker pull ghcr.io/uomresearchit/random</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker pull ghcr.io/uomresearchit/datamash</span></code></pre>
</div>
<p>Great! Butâ¦ how can we check what has happened? How can we know we
have the images? Letâs check with:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>REPOSITORY                                       TAG                            IMAGE ID       CREATED         SIZE
ghcr.io/uomresearchit/datamash                   latest                         a0143c45d868   5 minutes ago   49.7MB
ghcr.io/uomresearchit/random                     latest                         b39bc463abfd   6 weeks ago     7.04MB</code></pre>
</div>
<p>You should see output similar to the above, with the images we just
pulled listed.</p>
<p>Now we have the tools letâs try running them. Weâll start by
generating our data:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run ghcr.io/uomresearchit/random</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[...]
[Lot's of numbers!]
[...]
22307
21278
28211
21151
9209</code></pre>
</div>
<p>We can see this produces a <strong>lot</strong> of output. Letâs
write it to file instead:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run ghcr.io/uomresearchit/random <span class="op">&gt;</span> local\_data.txt</span></code></pre>
</div>
<p>We now have a datafile we can use on our other tool. Our supervisor
has told us a couple of helpful things about this container, apparently
all you have to do is give the container the filename you want to
analyse.</p>
<p>Letâs try that!</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run ghcr.io/uomresearchit/datamash local<span class="dt">\_</span>data.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
File "//mean.py", line 7, in &lt;module&gt;
with open(args.filename) as f:
FileNotFoundError: [Errno 2] No such file or directory: 'local\_data.txt'</code></pre>
</div>
<p>We gave the right filenameâ¦ So why hasnât this worked? The answer is
simple, but has profound implications.</p>
<p>The file we specified is present on our machine, but not inside the
container! The container has its own, completely isolated
filesystem.</p>
<p>This can really help, the containerâs file are stored in a nice,
safe, isolated place perfectly tailored for the application. But then,
how can we give our file to the container, in order for it to be
analysed?</p>
</section><section id="using-mounts-and-volumes"><h2 class="section-heading">Using mounts and volumes<a class="anchor" aria-label="anchor" href="#using-mounts-and-volumes"></a>
</h2>
<hr class="half-width">
<p>Dockerâs answer to this is to allow you to selectively expose files
and folders on your machine to the container you are running.</p>
<p>Docker calls these bind mounts and they take the following form: <img src="../fig/docker_mount.png" alt="A breakdown of the command for mounting a file into a container." class="figure"></p>
<p>Using this command we specify the type of mount we want (more on this
later!), the name of a local file (or directory) to mount to the
container and the path and filename which we would like inside the
container.</p>
<div id="pwd" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="pwd" class="callout-inner">
<h3 class="callout-title">$PWD<a class="anchor" aria-label="anchor" href="#pwd"></a>
</h3>
<div class="callout-content">
<p>You will notice we used an envirnoment variable (denoted by $) to
specify the location of our local file. This is because the docker
command needs the full path to a file to mount correctly, it wont work
if you do <code>./local_file.txt</code>!</p>
</div>
</div>
</div>
<p>Letâs try this out with our datamash container:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">--mount</span> type=bind,source=<span class="st">"</span><span class="va">$PWD</span><span class="st">"</span>/local\_data.txt,target=/local\_data.txt ghcr.io/uomresearchit/datamash local<span class="dt">\_</span>data.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Data file data.txt, selected.
Number of entries: 100.0
Sum: 1681522.0
Mean: 16815.22</code></pre>
</div>
<p>Wonderful! The container works now. But that syntax is very clunkyâ¦
Can it be shortened? The answer is yes, but it requires care - letâs
investigate.</p>
<p>Try out the following command:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">-v</span> <span class="va">$PWD</span>/data.txt:/data.txt ghcr.io/uomresearchit/datamash data.txt</span></code></pre>
</div>
<p>It works just like before! But there is a hidden danger here.</p>
<p>So far we have only discussed bind mounts. These are a simple
mechanism for binding bits of your local filesystem into containers.
There is another method for getting files into container, called
volumes.</p>
<p>Volumes are the isolated, persistent filesystems for containers, they
can be shared between containers and are very useful for retaining
information between container runs.</p>
<p>However, they are not particularly useful for getting files from host
to container!</p>
<p>Can you spot the difference?</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker run <span class="at">-v</span> data.txt:/data.txt ghcr.io/uomresearchit/datamash data.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
File "//mean.py", line 7, in &lt;module&gt;
with open(args.filename) as f:
IsADirectoryError: [Errno 21] Is a directory: 'data.txt'</code></pre>
</div>
<p>Why has this not worked? The answer is that Docker has created a
volume! Not mounted our file! This is because the Docker command
requires absolute paths, if a path doesnât evaluate correclty then it
assumes you are naming a new volume.</p>
<p>See this bit of the Docker man page:</p>
<pre><code>\-v|--volume[\=[[HOST-DIR:]CONTAINER-DIR[:OPTIONS]]]
Create a bind mount. If you specify, -v /HOST-DIR:/CONTAINER-DIR, Docker
bind mounts /HOST-DIR in the host to /CONTAINER-DIR in the Docker
container. If 'HOST-DIR' is omitted,  Docker automatically creates the new
volume on the host.</code></pre>
<p>For this reason, we would recommend using the full (clunky) syntax of
the mount command.</p>
</section><section id="running-services-in-docker"><h2 class="section-heading">Running services in Docker<a class="anchor" aria-label="anchor" href="#running-services-in-docker"></a>
</h2>
<hr class="half-width">
<p>This impermanence can be a challenge! What if we</p>
</section><section id="long-running-processes"><h2 class="section-heading">Long running processes<a class="anchor" aria-label="anchor" href="#long-running-processes"></a>
</h2>
<hr class="half-width">
<p>docker container with python analysis built in and simple upload
portal</p>
</section><section id="docker-exec"><h2 class="section-heading">Docker Exec<a class="anchor" aria-label="anchor" href="#docker-exec"></a>
</h2>
<hr class="half-width"></section><section id="copying-files"><h2 class="section-heading">Copying files<a class="anchor" aria-label="anchor" href="#copying-files"></a>
</h2>
<hr class="half-width">
<p>docker cp</p>
</section><section id="docker-ps"><h2 class="section-heading">Docker ps<a class="anchor" aria-label="anchor" href="#docker-ps"></a>
</h2>
<hr class="half-width"></section><section id="managing-the-system"><h2 class="section-heading">Managing the system<a class="anchor" aria-label="anchor" href="#managing-the-system"></a>
</h2>
<hr class="half-width">
<p>docker stats</p>
<div class="section level3">
<h3 id="removing-images">Removing images<a class="anchor" aria-label="anchor" href="#removing-images"></a>
</h3>
<p>docker image rm</p>
</div>
<div class="section level3">
<h3 id="removing-containers">Removing containers<a class="anchor" aria-label="anchor" href="#removing-containers"></a>
</h3>
<p>docker rm</p>
</div>
<div class="section level3">
<h3 id="removing-images-and-containers">Removing images and containers<a class="anchor" aria-label="anchor" href="#removing-images-and-containers"></a>
</h3>
<p>docker system prune docker system prune -a</p>
</div>
</section><section id="sum-up"><h2 class="section-heading">Sum up<a class="anchor" aria-label="anchor" href="#sum-up"></a>
</h2>
<hr class="half-width">
<p>docker run ârm âname mydocker âentrypoint thing âmount</p>
<p>in compose</p>
</section><section id="conclusion"><h2 class="section-heading">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<hr class="half-width">
<p>We have learned about the lifecycle of Docker containers, what
happens when they are started and how their behaviour is controled. We
have learned to run containers in the Docker command line interace and
how to interact with them directly.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>asdf</li>
<li>asdf</li>
<li>asdf</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-creating-container-images"><p>Content from <a href="creating-container-images.html">Creating Your Own Container Images</a></p>
<hr>
<p> Last updated on 2023-09-12 | 
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/episodes/creating-container-images.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 35 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>There are lots of reasons why you might want to create your
<strong>own</strong> Docker container image.</p>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make my own Docker container images?</li>
<li>How do I document the ârecipeâ for a Docker container image?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the purpose of a <code>Dockerfile</code> and show some
simple examples.</li>
<li>Demonstrate how to build a Docker container image from a
<code>Dockerfile</code>.</li>
<li>Compare the steps of creating a container image interactively versus
a <code>Dockerfile</code>.</li>
<li>Create an installation strategy for a container image.</li>
<li>Demonstrate how to upload (âpushâ) your container images to the
Docker Hub.</li>
<li>Describe the significance of the Docker Hub naming scheme.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<ul>
<li>You canât find a container image with all the tools you need on
Docker Hub.</li>
<li>You want to have a container image to âarchiveâ all the specific
software versions you ran for a project.</li>
<li>You want to share your workflow with someone else.</li>
</ul>
<section id="interactive-installation"><h2 class="section-heading">Interactive installation<a class="anchor" aria-label="anchor" href="#interactive-installation"></a>
</h2>
<hr class="half-width">
<p>Before creating a reproducible installation, letâs experiment with
installing software inside a container. Start a container from the
<code>alpine</code> container image we used before, interactively:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alpine sh</span></code></pre>
</div>
<p>Because this is a basic container, thereâs a lot of things not
installed â for example, <code>python3</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> python3</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sh: python3: not found</code></pre>
</div>
<p>Inside the container, we can run commands to install Python 3. The
Alpine version of Linux has a installation tool called <code>apk</code>
that we can use to install Python 3.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> apk add <span class="at">--update</span> python3 py3-pip python3-dev</span></code></pre>
</div>
<p>We can test our installation by running a Python command:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> python3 <span class="at">--version</span></span></code></pre>
</div>
<p>Once Python is installed, we can add Python packages using the pip
package installer:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> pip install cython</span></code></pre>
</div>
<div id="exercise-searching-for-help" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-searching-for-help" class="callout-inner">
<h3 class="callout-title">Exercise: Searching for Help<a class="anchor" aria-label="anchor" href="#exercise-searching-for-help"></a>
</h3>
<div class="callout-content">
<p>Can you find instructions for installing R on Alpine Linux? Do they
work?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>A quick search should hopefully show that the way to install R on
Alpine Linux is:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> apk add R</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Once we exit, these changes are not saved to a new container image by
default. There is a command that will âsnapshotâ our changes, but
building container images this way is not easily reproducible. Instead,
weâre going to take what weâve learned from this interactive
installation and create our container image from a reproducible recipe,
known as a <code>Dockerfile</code>.</p>
<p>If you havenât already, exit out of the interactively running
container.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> exit</span></code></pre>
</div>
</section><section id="put-installation-instructions-in-a-dockerfile"><h2 class="section-heading">Put installation instructions in a <code>Dockerfile</code><a class="anchor" aria-label="anchor" href="#put-installation-instructions-in-a-dockerfile"></a>
</h2>
<hr class="half-width">
<p>A <code>Dockerfile</code> is a plain text file with keywords and
commands that can be used to create a new container image.</p>
<p>From your shell, go to the folder you downloaded at the start of the
lesson and print out the Dockerfile inside:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/docker-intro/basic</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat Dockerfile</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FROM &lt;EXISTING IMAGE&gt;
RUN &lt;INSTALL CMDS FROM SHELL&gt;
RUN &lt;INSTALL CMDS FROM SHELL&gt;
CMD &lt;CMD TO RUN BY DEFAULT&gt;</code></pre>
</div>
<p>Letâs break this file down:</p>
<ul>
<li>The first line, <code>FROM</code>, indicates which container image
weâre starting with. It is the âbaseâ container image we are going to
start from.</li>
<li>The next two lines <code>RUN</code>, will indicate installation
commands we want to run. These are the same commands that we used
interactively above.</li>
<li>The last line, <code>CMD</code>, indicates the default command we
want a container based on this container image to run, if no other
command is provided. It is recommended to provide <code>CMD</code> in
<em>exec-form</em> (see the <a href="https://docs.docker.com/engine/reference/builder/#cmd" class="external-link"><code>CMD</code>
section</a> of the Dockerfile documentation for more details). It is
written as a list which contains the executable to run as its first
element, optionally followed by any arguments as subsequent elements.
The list is enclosed in square brackets (<code>[]</code>) and its
elements are double-quoted (<code>"</code>) strings which are separated
by commas. For example,
<code>CMD ["ls", "-lF", "--color", "/etc"]</code> would translate to
<code>ls -lF --color /etc</code>.</li>
</ul>
<div id="shell-form-and-exec-form-for-cmd" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="shell-form-and-exec-form-for-cmd" class="callout-inner">
<h3 class="callout-title">
<em>shell-form</em> and <em>exec-form</em> for
CMD<a class="anchor" aria-label="anchor" href="#shell-form-and-exec-form-for-cmd"></a>
</h3>
<div class="callout-content">
<p>Another way to specify the parameter for the <a href="https://docs.docker.com/engine/reference/builder/#cmd" class="external-link"><code>CMD</code>
instruction</a> is the <em>shell-form</em>. Here you type the command as
you would call it from the command line. Docker then silently runs this
command in the imageâs standard shell. <code>CMD cat /etc/passwd</code>
is equivalent to <code>CMD ["/bin/sh", "-c", "cat /etc/passwd"]</code>.
We recommend to prefer the more explicit <em>exec-form</em> because we
will be able to create more flexible container image command options and
make sure complex commands are unambiguous in this format.</p>
</div>
</div>
</div>
<div id="exercise-take-a-guess" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-take-a-guess" class="callout-inner">
<h3 class="callout-title">Exercise: Take a Guess<a class="anchor" aria-label="anchor" href="#exercise-take-a-guess"></a>
</h3>
<div class="callout-content">
<p>Do you have any ideas about what we should use to fill in the sample
Dockerfile to replicate the installation we did above?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Solution:
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Based on our experience above, edit the <code>Dockerfile</code> (in
your text editor of choice) to look like this:</p>
<pre><code>FROM alpine
RUN apk add --update python3 py3-pip python3-dev
RUN pip install cython
CMD ["python3", "--version"]</code></pre>
</div>
</div>
</div>
</div>
<p>The recipe provided by the <code>Dockerfile</code> shown in the
solution to the preceding exercise will use Alpine Linux as the base
container image, add Python 3 and the Cython library, and set a default
command to request Python 3 to report its version information.</p>
</section><section id="create-a-new-docker-image"><h2 class="section-heading">Create a new Docker image<a class="anchor" aria-label="anchor" href="#create-a-new-docker-image"></a>
</h2>
<hr class="half-width">
<p>So far, we only have a text file named <code>Dockerfile</code> â we
do not yet have a container image. We want Docker to take this
<code>Dockerfile</code>, run the installation commands contained within
it, and then save the resulting container as a new container image. To
do this we will use the <code>docker image build</code> command.</p>
<p>We have to provide <code>docker image build</code> with two pieces of
information:</p>
<ul>
<li>the location of the <code>Dockerfile</code>
</li>
<li>the name of the new container image. Remember the naming scheme from
before? You should name your new image with your Docker Hub username and
a name for the container image, like this:
<code>USERNAME/CONTAINER_IMAGE_NAME</code>.</li>
</ul>
<p>All together, the build command that you should run on your computer,
will have a similar structure to this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> USERNAME/CONTAINER_IMAGE_NAME .</span></code></pre>
</div>
<p>The <code>-t</code> option names the container image; the final dot
indicates that the <code>Dockerfile</code> is in our current
directory.</p>
<p>For example, if my user name was <code>alice</code> and I wanted to
call my container image <code>alpine-python</code>, I would use this
command:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alice/alpine-python .</span></code></pre>
</div>
<div id="build-context" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="build-context" class="callout-inner">
<h3 class="callout-title">Build Context<a class="anchor" aria-label="anchor" href="#build-context"></a>
</h3>
<div class="callout-content">
<p>Notice that the final input to <code>docker image build</code> isnât
the Dockerfile â itâs a directory! In the command above, weâve used the
current working directory (<code>.</code>) of the shell as the final
input to the <code>docker image build</code> command. This option
provides what is called the <em>build context</em> to Docker â if there
are files being copied into the built container image <a href="../advanced-containers">more details in the next episode</a> theyâre
assumed to be in this location. Docker expects to see a Dockerfile in
the build context also (unless you tell it to look elsewhere).</p>
<p>Even if it wonât need all of the files in the build context
directory, Docker does âloadâ them before starting to build, which means
that itâs a good idea to have only what you need for the container image
in a build context directory, as weâve done in this example.</p>
</div>
</div>
</div>
<div id="exercise-review" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-review" class="callout-inner">
<h3 class="callout-title">Exercise: Review!<a class="anchor" aria-label="anchor" href="#exercise-review"></a>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Think back to earlier. What command can you run to check if your
container image was created successfully? (Hint: what command shows the
container images on your computer?)</p></li>
<li><p>We didnât specify a tag for our container image name. What tag
did Docker automatically use?</p></li>
<li><p>What command will run a container based on the container image
youâve created? What should happen by default if you run such a
container? Can you make it do something different, like print âhello
worldâ?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>To see your new image, run <code>docker image ls</code>. You
should see the name of your new container image under the âREPOSITORYâ
heading.</p></li>
<li><p>In the output of <code>docker image ls</code>, you can see that
Docker has automatically used the <code>latest</code> tag for our new
container image.</p></li>
<li><p>We want to use <code>docker container run</code> to run a
container based on a container image.</p></li>
</ol>
<p>The following command should run a container and print out our
default message, the version of Python:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python</span></code></pre>
</div>
<p>To run a container based on our container image and print out âHello
worldâ instead:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python echo <span class="st">"Hello World"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>While it may not look like you have achieved much, you have already
effected the combination of a lightweight Linux operating system with
your specification to run a given command that can operate reliably on
macOS, Microsoft Windows, Linux and on the cloud!</p>
</section><section id="boring-but-important-notes-about-installation"><h2 class="section-heading">Boring but important notes about installation<a class="anchor" aria-label="anchor" href="#boring-but-important-notes-about-installation"></a>
</h2>
<hr class="half-width">
<p>There are a lot of choices when it comes to installing software â
sometimes too many! Here are some things to consider when creating your
own container image:</p>
<ul>
<li>
<strong>Start smart</strong>, or, donât install everything from
scratch! If youâre using Python as your main tool, start with a <a href="https://hub.docker.com/_/python" class="external-link">Python container image</a>. Same
with R. Weâve used Alpine Linux as an example in this lesson, but itâs
generally not a good container image to start with for initial
development and experimentation because it is a less common distribution
of Linux; using <a href="https://hub.docker.com/_/ubuntu" class="external-link">Ubuntu</a>, <a href="https://hub.docker.com/_/debian" class="external-link">Debian</a> and <a href="https://hub.docker.com/_/centos" class="external-link">CentOS</a> are all good options
for scientific software installations. The program youâre using might
recommend a particular distribution of Linux, and if so, it may be
useful to start with a container image for that distribution.</li>
<li>
<strong>How big?</strong> How much software do you really need to
install? When you have a choice, lean towards using smaller starting
container images and installing only whatâs needed for your software, as
a bigger container image means longer download times to use.</li>
<li>
<strong>Know (or Google) your Linux</strong>. Different
distributions of Linux often have distinct sets of tools for installing
software. The <code>apk</code> command we used above is the software
package installer for Alpine Linux. The installers for various common
Linux distributions are listed below:
<ul>
<li>Ubuntu: <code>apt</code> or <code>apt-get</code>
</li>
<li>Debian: <code>deb</code>
</li>
<li>CentOS: <code>yum</code> Most common software installations are
available to be installed via these tools. A web search for âinstall X
on Y Linuxâ is usually a good start for common software installation
tasks; if something isnât available via the Linux distributionâs
installation tools, try the options below.</li>
</ul>
</li>
<li>
<strong>Use what you know</strong>. Youâve probably used commands
like <code>pip</code> or <code>install.packages()</code> before on your
own computer â these will also work to install things in container
images (if the basic scripting language is installed).</li>
<li>
<strong>README</strong>. Many scientific software tools have a
README or installation instructions that lay out how to install
software. You want to look for instructions for Linux. If the install
instructions include options like those suggested above, try those
first.</li>
</ul>
<p>In general, a good strategy for installing software is:</p>
<ul>
<li>Make a list of what you want to install.</li>
<li>Look for pre-existing container images.</li>
<li>Read through instructions for software youâll need to install.</li>
<li>Try installing everything interactively in your base container â
take notes!</li>
<li>From your interactive installation, create a <code>Dockerfile</code>
and then try to build the container image from that.</li>
</ul></section><section id="share-your-new-container-image-on-docker-hub"><h2 class="section-heading">Share your new container image on Docker Hub<a class="anchor" aria-label="anchor" href="#share-your-new-container-image-on-docker-hub"></a>
</h2>
<hr class="half-width">
<p>Container images that you release publicly can be stored on the
Docker Hub for free. If you name your container image as described
above, with your Docker Hub username, all you need to do is run the
opposite of <code>docker image pull</code> â
<code>docker image push</code>.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image push alice/alpine-python</span></code></pre>
</div>
<p>Make sure to substitute the full name of your container image!</p>
<p>In a web browser, open <a href="https://hub.docker.com" class="external-link">https://hub.docker.com</a>, and on your
user page you should now see your container image listed, for anyone to
use or build on.</p>
<div id="logging-in" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="logging-in" class="callout-inner">
<h3 class="callout-title">Logging In<a class="anchor" aria-label="anchor" href="#logging-in"></a>
</h3>
<div class="callout-content">
<p>Technically, you have to be logged into Docker on your computer for
this to work. Usually it happens by default, but if
<code>docker image push</code> doesnât work for you, run
<code>docker login</code> first, enter your Docker Hub username and
password, and then try <code>docker image push</code> again.</p>
</div>
</div>
</div>
</section><section id="whats-in-a-name-again"><h2 class="section-heading">Whatâs in a name? (again)<a class="anchor" aria-label="anchor" href="#whats-in-a-name-again"></a>
</h2>
<hr class="half-width">
<p>You donât <em>have</em> to name your containers images using the
<code>USERNAME/CONTAINER_IMAGE_NAME:TAG</code> naming scheme. On your
own computer, you can call container images whatever you want, and refer
to them by the names you choose. Itâs only when you want to share a
container image that it needs the correct naming format.</p>
<p>You can rename container images using the
<code>docker image tag</code> command. For example, imagine someone
named Alice has been working on a workflow container image and called it
<code>workflow-test</code> on her own computer. She now wants to share
it in her <code>alice</code> Docker Hub account with the name
<code>workflow-complete</code> and a tag of <code>v1</code>. Her
<code>docker image tag</code> command would look like this:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image tag workflow-test alice/workflow-complete:v1</span></code></pre>
</div>
<p>She could then push the re-named container image to Docker Hub, using
<code>docker image push alice/workflow-complete:v1</code></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>Dockerfile</code>s specify what is within Docker container
images.</li>
<li>The <code>docker image build</code> command is used to build a
container image from a <code>Dockerfile</code>.</li>
<li>You can share your Docker container images through the Docker Hub so
that others can create Docker containers from your container
images.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-advanced-containers"><p>Content from <a href="advanced-containers.html">Creating More Complex Container Images</a></p>
<hr>
<p> Last updated on 2023-09-12 | 
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/episodes/advanced-containers.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 60 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<p>In order to create and use your own container images, you may need
more information than our previous example. You may want to use files
from outside the container, that are not included within the container
image, either by copying the files into the container image, or by
making them visible within a running container from their existing
location on your host system. You may also want to learn a little bit
about how to install software within a running container or a container
image. This episode will look at these advanced aspects of running a
container or building a container image. Note that the examples will get
gradually more and more complex â most day-to-day use of containers and
container images can be accomplished using the first 1â2 sections on
this page.</p>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I make more complex container images?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how you can include files within Docker container images
when you build them.</li>
<li>Explain how you can access files on the Docker host from your Docker
containers.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="using-scripts-and-files-from-outside-the-container"><h2 class="section-heading">Using scripts and files from outside the container<a class="anchor" aria-label="anchor" href="#using-scripts-and-files-from-outside-the-container"></a>
</h2>
<hr class="half-width">
<p>In your shell, change to the <code>sum</code> folder in the
<code>docker-intro</code> folder and look at the files inside.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd ~/Desktop/docker-intro/sum</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<p>This folder has both a <code>Dockerfile</code> and a Python script
called <code>sum.py</code>. Letâs say we wanted to try running the
script using a container based on our recently created
<code>alpine-python</code> container image.</p>
<div id="running-containers" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="running-containers" class="callout-inner">
<h3 class="callout-title">Running containers<a class="anchor" aria-label="anchor" href="#running-containers"></a>
</h3>
<div class="callout-content">
<p>What command would we use to run Python from the
<code>alpine-python</code> container?</p>
</div>
</div>
</div>
<p>If we try running the container and Python script, what happens?</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alice/alpine-python python3 sum.py</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>python3: can't open file 'sum.py': [Errno 2] No such file or directory</code></pre>
</div>
<div id="no-such-file-or-directory" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="no-such-file-or-directory" class="callout-inner">
<h3 class="callout-title">No such file or directory<a class="anchor" aria-label="anchor" href="#no-such-file-or-directory"></a>
</h3>
<div class="callout-content">
<p>What does the error message mean? Why might the Python inside the
container not be able to find or open our script?</p>
</div>
</div>
</div>
<p>The problem here is that the container and its filesystem is separate
from our host computerâs filesystem. When the container runs, it canât
see anything outside itself, including any of the files on our computer.
In order to use Python (inside the container) and our script (outside
the container, on our host computer), we need to create a link between
the directory on our computer and the container.</p>
<p>This link is called a âmountâ and is what happens automatically when
a USB drive or other external hard drive gets connected to a computer â
you can see the contents appear as if they were on your computer.</p>
<p>We can create a mount between our computer and the running container
by using an additional option to <code>docker container run</code>.
Weâll also use the variable <code>${PWD}</code> which will substitute in
our current working directory. The option will look like this</p>
<p><code>--mount type=bind,source=${PWD},target=/temp</code></p>
<p>What this means is: make my current working directory (on the host
computer) â the source â <em>visible</em> within the container that is
about to be started, and inside this container, name the directory
<code>/temp</code> â the target.</p>
<div id="types-of-mounts" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="types-of-mounts" class="callout-inner">
<h3 class="callout-title">Types of mounts<a class="anchor" aria-label="anchor" href="#types-of-mounts"></a>
</h3>
<div class="callout-content">
<p>You will notice that we set the mount <code>type=bind</code>, there
are other types of mount that can be used in Docker
(e.g.Â <code>volume</code> and <code>tmpfs</code>). We do not cover other
types of mounts or the differences between these mount types in the
course as it is more of an advanced topic. You can find more information
on the different mount types in <a href="https://docs.docker.com/storage/" class="external-link">the Docker
documentation</a>.</p>
</div>
</div>
</div>
<p>Letâs try running the command now:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">--mount</span> type=bind,source=<span class="va">${PWD}</span>,target=/temp alice/alpine-python python3 sum.py</span></code></pre>
</div>
<p>But we get the same error!</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>python3: can't open file 'sum.py': [Errno 2] No such file or directory</code></pre>
</div>
<p>This final piece is a bit tricky â we really have to remember to put
ourselves inside the container. Where is the <code>sum.py</code> file?
Itâs in the directory thatâs been mapped to <code>/temp</code> â so we
need to include that in the path to the script. This command should give
us what we need:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">--mount</span> type=bind,source=<span class="va">${PWD}</span>,target=/temp alice/alpine-python python3 /temp/sum.py</span></code></pre>
</div>
<p>Note that if we create any files in the <code>/temp</code> directory
while the container is running, these files will appear on our host
filesystem in the original directory and will stay there even when the
container stops.</p>
<div id="other-commonly-used-docker-run-flags" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-commonly-used-docker-run-flags" class="callout-inner">
<h3 class="callout-title">Other Commonly Used Docker Run Flags<a class="anchor" aria-label="anchor" href="#other-commonly-used-docker-run-flags"></a>
</h3>
<div class="callout-content">
<p>Docker run has many other useful flags to alter its function. A
couple that are commonly used include <code>-w</code> and
<code>-u</code>.</p>
<p>The <code>--workdir</code>/<code>-w</code> flag sets the working
directory a.k.a. runs the command being executed inside the directory
specified. For example, the following code would run the
<code>pwd</code> command in a container started from the latest ubuntu
image in the <code>/home/alice</code> directory and print
<code>/home/alice</code>. If the directory doesnât exist in the image it
will create it.</p>
<pre><code>docker container run -w /home/alice/ ubuntu pwd</code></pre>
<p>The <code>--user</code>/<code>-u</code> flag lets you specify the
username you would like to run the container as. This is helpful if
youâd like to write files to a mounted folder and not write them as
<code>root</code> but rather your own user identity and group. A common
example of the <code>-u</code> flag is
<code>--user $(id -u):$(id -g)</code> which will fetch the current
userâs ID and group and run the container as that user.</p>
</div>
</div>
</div>
<div id="exercise-explore-the-script" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-explore-the-script" class="callout-inner">
<h3 class="callout-title">Exercise: Explore the script<a class="anchor" aria-label="anchor" href="#exercise-explore-the-script"></a>
</h3>
<div class="callout-content">
<p>What happens if you use the <code>docker container run</code> command
above and put numbers after the script name?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>This script comes from <a href="https://wiki.python.org/moin/SimplePrograms" class="external-link">the Python Wiki</a>
and is set to add all numbers that are passed to it as arguments.</p>
</div>
</div>
</div>
</div>
<div id="exercise-checking-the-options" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-checking-the-options" class="callout-inner">
<h3 class="callout-title">Exercise: Checking the options<a class="anchor" aria-label="anchor" href="#exercise-checking-the-options"></a>
</h3>
<div class="callout-content">
<p>Our Docker command has gotten much longer! Can you go through each
piece of the Docker command above and explain what it does? How would
you characterize the key components of a Docker command?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Hereâs a breakdown of each piece of the command above</p>
<ul>
<li>
<code>docker container run</code>: use Docker to run a
container</li>
<li>
<code>--mount type=bind,source=${PWD},target=/temp</code>: connect
my current working directory (<code>${PWD}</code>) as a folder inside
the container called <code>/temp</code>
</li>
<li>
<code>alice/alpine-python</code>: name of the container image to use
to run the container</li>
<li>
<code>python3 /temp/sum.py</code>: what commands to run in the
container</li>
</ul>
<p>More generally, every Docker command will have the form:
<code>docker [action] [docker options] [docker container image] [command to run inside]</code></p>
</div>
</div>
</div>
</div>
<div id="exercise-interactive-jobs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-interactive-jobs" class="callout-inner">
<h3 class="callout-title">Exercise: Interactive jobs<a class="anchor" aria-label="anchor" href="#exercise-interactive-jobs"></a>
</h3>
<div class="callout-content">
<p>Try using the directory mount option but run the container
interactively. Can you find the folder thatâs connected to your host
computer? Whatâs inside?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>The docker command to run the container interactively is:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">--mount</span> type=bind,source=<span class="va">${PWD}</span>,target=/temp <span class="at">-it</span> alice/alpine-python sh</span></code></pre>
</div>
<p>Once inside, you should be able to navigate to the <code>/temp</code>
folder and see thatâs contents are the same as the files on your host
computer:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> cd /temp</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> ls</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Mounting a directory can be very useful when you want to run the
software inside your container on many different input files. In other
situations, you may want to save or archive an authoritative version of
your data by adding it to the container image permanently. Thatâs what
we will cover next.</p>
</section><section id="including-your-scripts-and-data-within-a-container-image"><h2 class="section-heading">Including your scripts and data within a container image<a class="anchor" aria-label="anchor" href="#including-your-scripts-and-data-within-a-container-image"></a>
</h2>
<hr class="half-width">
<p>Our next project will be to add our own files to a container image â
something you might want to do if youâre sharing a finished analysis or
just want to have an archived copy of your entire analysis including the
data. Letâs assume that weâve finished with our <code>sum.py</code>
script and want to add it to the container image itself.</p>
<p>In your shell, you should still be in the <code>sum</code> folder in
the <code>docker-intro</code> folder.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /Users/yourname/Desktop/docker-intro/sum</span></code></pre>
</div>
<p>Letâs add a new line to the <code>Dockerfile</code> weâve been using
so far to create a copy of <code>sum.py</code>. We can do so by using
the <code>COPY</code> keyword.</p>
<pre><code>COPY sum.py /home</code></pre>
<p>This line will cause Docker to copy the file from your computer into
the containerâs filesystem. Letâs build the container image like before,
but give it a different name:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alice/alpine-sum .</span></code></pre>
</div>
<div id="the-importance-of-command-order-in-a-dockerfile" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-importance-of-command-order-in-a-dockerfile" class="callout-inner">
<h3 class="callout-title">The Importance of Command Order in a
Dockerfile<a class="anchor" aria-label="anchor" href="#the-importance-of-command-order-in-a-dockerfile"></a>
</h3>
<div class="callout-content">
<p>When you run <code>docker build</code> it executes the build in the
order specified in the <code>Dockerfile</code>. This order is important
for rebuilding and you typically will want to put your <code>RUN</code>
commands before your <code>COPY</code> commands.</p>
<p>Docker builds the layers of commands in order. This becomes important
when you need to rebuild container images. If you change layers later in
the <code>Dockerfile</code> and rebuild the container image, Docker
doesnât need to rebuild the earlier layers but will instead used a
stored (called âcachedâ) version of those layers.</p>
<p>For example, in an instance where you wanted to copy
<code>multiply.py</code> into the container image instead of
<code>sum.py</code>. If the <code>COPY</code> line came before the
<code>RUN</code> line, it would need to rebuild the whole image. If the
<code>COPY</code> line came second then it would use the cached
<code>RUN</code> layer from the previous build and then only rebuild the
<code>COPY</code> layer.</p>
</div>
</div>
</div>
<div id="exercise-did-it-work" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-did-it-work" class="callout-inner">
<h3 class="callout-title">Exercise: Did it work?<a class="anchor" aria-label="anchor" href="#exercise-did-it-work"></a>
</h3>
<div class="callout-content">
<p>Can you remember how to run a container interactively? Try that with
this one. Once inside, try running the Python script.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>You can start the container interactively like so:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alice/alpine-sum sh</span></code></pre>
</div>
<p>You should be able to run the python command inside the container
like this:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/#</span> python3 /home/sum.py</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>This <code>COPY</code> keyword can be used to place your own scripts
or own data into a container image that you want to publish or use as a
record. Note that itâs not necessarily a good idea to put your scripts
inside the container image if youâre constantly changing or editing
them. Then, referencing the scripts from outside the container is a good
idea, as we did in the previous section. You also want to think
carefully about size â if you run <code>docker image ls</code> youâll
see the size of each container image all the way on the right of the
screen. The bigger your container image becomes, the harder it will be
to easily download.</p>
<div id="callout4" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout<a class="anchor" aria-label="anchor" href="#callout4"></a>
</h3>
<div class="callout-content">
<p>##Â Security warning Login credentials including passwords, tokens,
secure access tokens or other secrets must never be stored in a
container. If secrets are stored, they are at high risk to be found and
exploited when made public.</p>
</div>
</div>
</div>
<div id="copying-alternatives" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="copying-alternatives" class="callout-inner">
<h3 class="callout-title">Copying alternatives<a class="anchor" aria-label="anchor" href="#copying-alternatives"></a>
</h3>
<div class="callout-content">
<p>Another trick for getting your own files into a container image is by
using the <code>RUN</code> keyword and downloading the files from the
internet. For example, if your code is in a GitHub repository, you could
include this statement in your Dockerfile to download the latest version
every time you build the container image:</p>
<pre><code>RUN git clone https://github.com/alice/mycode</code></pre>
<p>Similarly, the <code>wget</code> command can be used to download any
file publicly available on the internet:</p>
<pre><code>RUN wget ftp://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/2.10.0/ncbi-blast-2.10.0+-x64-linux.tar.gz</code></pre>
<p>Note that the above <code>RUN</code> examples depend on commands
(<code>git</code> and <code>wget</code> respectively) that must be
available within your container: Linux distributions such as Alpine may
require you to install such commands before using them within
<code>RUN</code> statements.</p>
</div>
</div>
</div>
</section><section id="more-fancy-dockerfile-options-optional-for-presentation-or-as-exercises"><h2 class="section-heading">More fancy <code>Dockerfile</code> options (optional, for
presentation or as exercises)<a class="anchor" aria-label="anchor" href="#more-fancy-dockerfile-options-optional-for-presentation-or-as-exercises"></a>
</h2>
<hr class="half-width">
<p>We can expand on the example above to make our container image even
more âautomaticâ. Here are some ideas:</p>
<div class="section level3">
<h3 id="make-the-sum-py-script-run-automatically">Make the <code>sum.py</code> script run automatically<a class="anchor" aria-label="anchor" href="#make-the-sum-py-script-run-automatically"></a>
</h3>
<pre><code>FROM alpine
RUN apk add --update python3 py3-pip python3-dev
COPY sum.py /home

# Run the sum.py script as the default command
CMD ["python3", "/home/sum.py"]</code></pre>
<p>Build and test it:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alpine-sum:v1 .</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v1</span></code></pre>
</div>
<p>Youâll notice that you can run the container without arguments just
fine, resulting in <code>sum = 0</code>, but this is boring. Supplying
arguments however doesnât work:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">docker</span> container run alpine-sum:v1 10 11 12</span></code></pre>
</div>
<p>results in</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>docker: Error response from daemon: OCI runtime create failed:
container_linux.go:349: starting container process caused "exec:
\"10\": executable file not found in $PATH": unknown.</code></pre>
</div>
<p>This is because the arguments <code>10 11 12</code> are interpreted
as a <em>command</em> that replaces the default command given by
<code>CMD ["python3", "/home/sum.py"]</code> in the image.</p>
<p>To achieve the goal of having a command that <em>always</em> runs
when a container is run from the container image <em>and</em> can be
passed the arguments given on the command line, use the keyword
<code>ENTRYPOINT</code> in the <code>Dockerfile</code>.</p>
<pre><code>FROM alpine

COPY sum.py /home
RUN apk add --update python3 py3-pip python3-dev

# Run the sum.py script as the default command and
# allow people to enter arguments for it
ENTRYPOINT ["python3", "/home/sum.py"]

# Give default arguments, in case none are supplied on
# the command-line
CMD ["10", "11"]</code></pre>
<p>Build and test it:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alpine-sum:v2 .</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Most of the time you are interested in the sum of 10 and 11:</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v2</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sometimes you have more challenging calculations to do:</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v2 12 13 14</span></code></pre>
</div>
<div id="overriding-the-entrypoint" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="overriding-the-entrypoint" class="callout-inner">
<h3 class="callout-title">Overriding the ENTRYPOINT<a class="anchor" aria-label="anchor" href="#overriding-the-entrypoint"></a>
</h3>
<div class="callout-content">
<p>Sometimes you donât want to run the imageâs <code>ENTRYPOINT</code>.
For example if you have a specialized container image that does only
sums, but you need an interactive shell to examine the container:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> alpine-sum:v2 /bin/sh</span></code></pre>
</div>
<p>will yield</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Please supply integer arguments</code></pre>
</div>
<p>You need to override the <code>ENTRYPOINT</code> statement in the
container image like so:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run <span class="at">-it</span> <span class="at">--entrypoint</span> /bin/sh alpine-sum:v2</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="add-the-sum-py-script-to-the-path-so-you-can-run-it-directly">Add the <code>sum.py</code> script to the <code>PATH</code> so you
can run it directly:<a class="anchor" aria-label="anchor" href="#add-the-sum-py-script-to-the-path-so-you-can-run-it-directly"></a>
</h3>
<pre><code>FROM alpine

RUN apk add --update python3 py3-pip python3-dev

COPY sum.py /home
# set script permissions
RUN chmod +x /home/sum.py
# add /home folder to the PATH
ENV PATH /home:$PATH</code></pre>
<p>Build and test it:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker image build <span class="at">-t</span> alpine-sum:v3 .</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> docker container run alpine-sum:v3 sum.py 1 2 3 4</span></code></pre>
</div>
<div id="best-practices-for-writing-dockerfiles" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="best-practices-for-writing-dockerfiles" class="callout-inner">
<h3 class="callout-title">Best practices for writing Dockerfiles<a class="anchor" aria-label="anchor" href="#best-practices-for-writing-dockerfiles"></a>
</h3>
<div class="callout-content">
<p>Take a look at NÃ¼st et al.âs â<a href="https://doi.org/10.1371/journal.pcbi.1008316" class="external-link"><em>Ten simple rules
for writing Dockerfiles for reproducible data science</em></a>â [1] for
some great examples of best practices to use when writing Dockerfiles.
The <a href="https://github.com/nuest/ten-simple-rules-dockerfiles" class="external-link">GitHub
repository</a> associated with the paper also has a set of <a href="https://github.com/nuest/ten-simple-rules-dockerfiles/tree/master/examples" class="external-link">example
<code>Dockerfile</code>s</a> demonstrating how the rules highlighted by
the paper can be applied.</p>
<p><small>[1] NÃ¼st D, Sochat V, Marwick B, Eglen SJ, Head T, et
al.Â (2020) Ten simple rules for writing Dockerfiles for reproducible
data science. PLOS Computational Biology 16(11): e1008316. <a href="https://doi.org/10.1371/journal.pcbi.1008316" class="external-link">https://doi.org/10.1371/journal.pcbi.1008316</a></small></p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Docker allows containers to read and write files from the Docker
host.</li>
<li>You can include files from your Docker host into your Docker
container images by using the <code>COPY</code> instruction in your
<code>Dockerfile</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/UoMResearchIT/docker-introduction/edit/main/README.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/UoMResearchIT/docker-introduction/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/UoMResearchIT/docker-introduction/" class="external-link">Source</a></p>
				<p><a href="https://github.com/UoMResearchIT/docker-introduction/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="../LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.13.0" class="external-link">sandpaper (0.13.0)</a>,
        <a href="https://github.com/carpentries/pegboard/tree/0.6.1" class="external-link">pegboard (0.6.1)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.3.0" class="external-link">varnish (0.3.0)</a>.</p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://uomresearchit.github.io/docker-introduction/instructor/aio.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://uomresearchit.github.io/docker-introduction/instructor/aio.html",
  "identifier": "https://uomresearchit.github.io/docker-introduction/instructor/aio.html",
  "dateCreated": "2015-04-18",
  "dateModified": "2023-09-12",
  "datePublished": "2023-09-12"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

